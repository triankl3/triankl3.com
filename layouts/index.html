{{ define "main" }}

{{ partial "grid.html" . }}

{{ partial "cube.html" "cube1" }}
{{ partial "cube.html" "cube2" }}
<style>
    #cube1 {
        bottom: 20%;
        left: 20%;
    }
    #cube2 {
        top: 20%;
        right: 25%;
    }
</style>

{{ partial "nav-logo.html" . }}
{{ partial "nav-socials.html" }}
{{ partial "nav-index.html" }}

<div class="content-wrapper">
    <div id="landing">
        <img src="/img/about-main.svg" style="user-select: none;" draggable="false">
    </div>

    <div id="projects">
        <div class="posts-showcase animate-visibility-slow">
            <div class="posts-showcase-alltags">
                <ul class="post-tags">
                    <li class="post-tag post-tag-selected">all</li>
                    {{ range $name, $taxonomy := .Site.Taxonomies.tags }}
                        <li class="post-tag">{{ $name }}</li>
                    {{ end }}
                </ul>
            </div>

            {{ range (where .Site.Pages "Section" "projects") }}
                {{ range .Pages }}
                    <!-- Prepare a compressed version of the feature image to use as a background/thumbnail -->
                    {{ $featured_img_path := print "img/" .Params.image }}
                    {{ $featured_img := resources.Get $featured_img_path}}
                    {{ $featured_img := $featured_img.Resize "x480" }}
                    {{ $featured_color := (index $featured_img.Colors 1) }}

                    <a href=" {{ .RelPermalink }} ">
                        <div class="posts-showcase-post tilt-img">
                            <div style="background-image: url('{{ $featured_img.RelPermalink }}')"></div>
                            <time>{{ .Date.Format "Mon Jan 2, 2006" }}</time>
                            <h1 style=" -webkit-text-stroke: 1px color-mix(in srgb, {{ $featured_color }} 50%, white)">{{ .Title }}</h1>
                            <p>{{ .Description | truncate 96 }}</p>
                            
                            <ul class="post-tags">
                                {{- with .Params.tags -}}
                                    {{- if ge (len .) 1 -}}
                                        {{- range . -}}
                                        <li class="post-tag">{{ . }}</li>
                                        {{ end -}}
                                    {{- end -}}
                                {{- end -}}
                            </ul>
                        </div>
                    </a>
                {{ end }}
            {{ end }}
        </div>

        <img id="landing-extended" src="/img/about-extended.svg" style="user-select: none;" draggable="false">
    </div>
</div>

<div id="contact">
    <div class="content-wrapper">
        <img src="/img/contact.svg" style="user-select: none;" draggable="false">
        <p>
            The best method to reach me is via e-mail at <a href="mailto:{{ .Site.Params.contact.email }}">{{ .Site.Params.contact.email }}</a>, 
            for more urgent inquires you can contact me through Discord <span style="font-weight: 400;">{{ .Site.Params.contact.discord }}</span>.
            You can also find me on the following platforms:
        </p>

        <ul>
            <li><a target="_blank" href="{{ site.Params.contact.github }}"><img src="/img/github.svg"></a></li>
            <li><a target="_blank" href="{{ site.Params.contact.linkedin }}"><img src="/img/linkedin.svg"></a></li>
            <li><a target="_blank" href="{{ site.Params.contact.twitter }}"><img src="/img/twitter.svg"></a></li>
        </ul>
    </div>
</div>

<script>
    var hiddenArray = [document.querySelector('#landing'), document.querySelector('#projects')]

    Motion.inView(document.querySelectorAll('#contact'), (enterInfo) => {
        Motion.animate(hiddenArray, {opacity: [1, 0]}, {duration: 0.5});
        Motion.animate(enterInfo.target, {translateY: [0, "-128px"]}, {duration: 1})

        return (leaveInfo) => {
            Motion.animate(hiddenArray, {opacity: [0, 1]}, {duration: 0.5});
            Motion.animate(enterInfo.target, {translateY: ["-128px", 0]}, {duration: 1})
        }
    })
</script>

{{ end }}