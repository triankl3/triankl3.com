{{/*  Handles the necessary code to display post cards  */}}

{{/*  Prepare a compressed version of the featured image to use as a thumbnail  */}}
{{ $featured_img_path := print "img/" .Params.image }}
{{ $featured_img := resources.Get $featured_img_path }}
{{ $featured_img := $featured_img.Resize "x480" }}
{{ $featured_color := (index $featured_img.Colors 1) }}
{{ $featured_color_list := delimit $featured_img.Colors ", " }}

<div 
    class="post-list-card vanilla-tilt" 
    onmouseenter="document.getElementById('effect-gradient').setAttribute('style', 'background: linear-gradient(90deg, ' + {{ $featured_color_list }} + '); background-size: 200% 200%; opacity: 1;')"
    onmouseleave="document.getElementById('effect-gradient').style.opacity = 0;">
    <a href=" {{ .RelPermalink }} " class="tf-filter-item" data-tags="{{ with .Params.tags }} {{ range . }} {{ . }} {{ end }} {{ end }}">
        <div style="background-image: url('{{ $featured_img.RelPermalink }}')"></div>
        <h2>{{ .Date.Format "Jan 2, 2006" }} // {{ .Section }}</h2>
        <h1 style=" -webkit-text-stroke: 1px color-mix(in srgb, {{ $featured_color }} 50%, white)">{{ .Title }}</h1>
        <p>{{ .Description | truncate 96 }}</p>
        
        <ul class="post-tags">
            {{ with .Params.tags }}
                {{ if ge (len .) 1 }}
                    {{ range . }}
                        <li class="post-tag">{{ . }}</li>
                    {{ end }}
                {{ end }}
            {{ end }}
        </ul>
    </a>
</div>