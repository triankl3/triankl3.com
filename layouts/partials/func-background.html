{{/*  Handles changing background colors in post sections, used from inside shortcodes usually, relying on a unique ID passed for the container element in question */}}

{{ $background := .background }}
{{ $color := .color }}
{{ $unique_id := .unique_id }}

{{ $default_color := "#dddddd" }}
{{ $default_bg_color := "#111111" }}
{{ $final_color := $default_color }}
{{ $final_bg_color := $default_bg_color }}

{{ if in $background "white" }} {{/* Use white background */}}
    {{ $final_color = $default_bg_color }}
    {{ $final_bg_color = $default_color }}
{{ else if in $background "black" }} {{/* Using black background */}}
    {{ $final_color = $default_color }}
    {{ $final_bg_color = $default_bg_color }}
{{ else if hasPrefix $background "#" }} {{/* Using color as background */}}
    {{ $final_bg_color = $background }}
{{ end }}

{{ if hasPrefix $color "#" }}
    {{ $final_color = $color }}
{{ end }}

{{ $final_bg_color_rgb := partial "func-hextorgb.html" $final_bg_color | print | safeCSS }}

<style>
    #{{ $unique_id }} {
        background-color: rgba({{ $final_bg_color_rgb }}, 0.9);
        color: {{ $final_color }};
    }
    #{{ $unique_id }} a {
        color: {{ $final_color }};
    }
    #{{ $unique_id }} blockquote {
        border-color: {{ $final_color }};
    }
    #{{ $unique_id }} table td {
        border-color: {{ $final_color }};
    }
    #{{ $unique_id }} table th {
        border-color: {{ $final_color }};
        color: {{ $final_bg_color }};
        background-color: {{ $final_color }};
    }
</style>